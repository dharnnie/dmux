# dmux agents configuration
# Place as .dmux-agents.yml in your project root

session: my-api-agents
worktree_base: ..              # relative to project root (default: "..")
main_pane: true                # include a bottom pane for integration work

# namespace_branches: true     # prefix branches with git username (e.g., daniel/feature/auth)

# on_complete: post-task instructions appended to every agent's prompt
# Supported shorthands: test, push, pr
# on_complete:
#   - test                     # run the project's test suite and fix failures
#   - push                     # push the branch to the remote
#   - pr                       # create a draft pull request

agents:
  - name: auth
    branch: feature/auth
    task: "implement JWT authentication with refresh tokens"
    # scope: restrict which files this agent may modify
    # scope:
    #   - src/auth/
    #   - src/middleware/auth.ts
    #   - tests/auth/
    # context: files the agent may read but not modify
    # context:
    #   - src/types/
    #   - src/config/
    # on_complete: per-agent override (replaces top-level on_complete)
    # on_complete:
    #   - test
    #   - push
    #   - pr
  - name: catalog
    branch: feature/catalog
    task: "build product listing API with search and filters"
  - name: admin
    branch: feature/admin
    task: "create admin dashboard CRUD endpoints"
  # Review agents (role: review) are supported but not recommended.
  # A review agent uses the same model as the build agents, so it adds
  # cost and latency with limited independent value. Prefer reviewing
  # branches yourself in the main pane or running automated checks
  # (linting, tests) as part of the build agent command instead.
  - name: reviewer
    role: review
    task: "review changes on feature/auth, feature/catalog, and feature/admin for bugs, security issues, and style"
    depends_on:
      - auth
      - catalog
      - admin
